---
import { codeToHtml } from "shiki";
import cn from "@/lib/cn";
import CopyButton from "./copyButton.astro";

interface Props {
  title: string;
  code: string;
  className?: string;
}

const { className, title, code } = Astro.props;

const codeInHtml = await codeToHtml(code, {
  lang: "tsx",
  theme: "one-dark-pro",
  colorReplacements: {
    "#282c34": "#17171700",
  },
});
---

<div
  class={cn(
    "flex flex-col w-full max-w-4xl max-h-125 rounded-md bg-neutral-900/50 border border-neutral-800",
    className,
  )}
>
  <div
    class="h-14 shrink-0 w-full flex items-center justify-between px-4 border-b border-b-neutral-800/50"
  >
    <span class="opacity-50">{title}</span>

    <CopyButton contentToCopy={code} />
  </div>

  <span class="p-4 overflow-auto" set:html={codeInHtml} />
</div>
